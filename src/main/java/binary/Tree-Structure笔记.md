# 红黑树

<u>红黑树是一种自平衡的二叉查找树。</u>

* 问：什么是二叉查找树（BST）？
* 答：1、左子树上所有结点的值均小于或等于它的根节点的值。
    2、右子树上所有结点的值均大于或等于他的根结点的值。
    3、左、右子树也分别为二叉排序树。
    特点：查找所需的最大次数等同于二叉树的高度。存在的问题：插入的时候可能形成左斜树，或者右斜树。
    为了解决二叉查找树多次插入新节点导致的不平衡，红黑树应运而生。

* 问：红黑树的特点？
* 答：除了符合二叉查找树的基本特征外还包括以下特征：
    1、节点是红色或者黑色。
    2、根节点是黑色。
    3、每个叶子节点都是黑色的空节点。
    4、每个红色节点的两个子节点都是黑色。（从每个叶子节点到跟的所有路径上不能有两个连续的红色节点）
    5、从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。
    推理：红黑树从根节点到叶子节点的最长路径不会超过最短路径的两倍。

* 问：当插入节点（为红色）打破了红黑树的规则，需要进行调整，调整有两种方法。
* 答：1、变色。尝试把红色节点变为黑色，或把黑色节点变为红色。
      2、旋转。
        1、左旋转。逆时针旋转红黑树的两个节点，使得父节点被自己的右孩子取代，而自己称为左孩子。
        2、右旋转。逆时针旋转红黑树的两个节点，使得父节点被自己的左孩子取代，而自己称为右孩子

# B-树 （Balance Tree）

<u>B-树就是B树，中间的横线不是减号。B-树是一种多路平衡查找树，它的每一个节点最多包含K个孩子，K被称为B树的阶。K的大小取决于磁盘页
的大小。</u>

* 问：数据库索引为什么使用树结构存储？
* 答：首先说明为什么不使用二叉查找树（Ologn），我们不得不考虑一个现实问题：磁盘IO，数据库索引是存储在磁盘上的，当数据量比较大的时候，
    索引的大小可能有几个G甚至更多。当我们利用索引查询的时候，能把所有的索引全部加载到内存吗？显然不可能。能做的只有逐一加载每一个
    磁盘页，这里的磁盘页对应着索引树的节点。
    当使用二叉查找树时，磁盘IO的次数由索引树的高度决定。为了减少磁盘IO次数，我们就需要把原本“瘦高”的树结构变得“矮胖”。这就是
    B-树的特征之一。

* 问：一个M阶的B树具有以下的几个特征。
* 答：1、根节点至少由两个子女。
    2、每个中间节点都包含k-1个元素和k个孩子，其中 m/2 <= k <= m
    3、每一个叶子节点都包含k-1个元素，其中 m/2 <= k <=m
    4、所有的叶子节点都位于同一层。
    5、每个节点中的元素从小到大排列，节点当中k-1个元素正好是k个孩子包含的元素的值域分划。

* 问：B-树的都有那些实际应用？
* 答：B-树主要应用于文件系统以及部分数据库索引，比如著名的非关系型数据库MongoDB。而大部分的关系型数据库，比如Mysql，
则使用B+树作为索引。

# B+树
***
* 问：什么是B+树？
* 答：B+树是基于B-树的一种变体，有着比B-树更高的查询性能
***
* 问：一个m阶的B+树具有如下几个特征？
* 答： 1. 有K个子树的中间节点包含有K个元素(B树中是k-1个元素) ，每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。
       2. 所有的叶子节点中包含了全部元素的信息，以及指向这些元素记录的指针，且叶子节点本身以关键字的大小自小而大顺序链接。
       3. 所有中间节点元素都同时存在于子节点，在子节点元素中是最大(或最小元素。)

* 问：B+树的重要特征--卫星数据。
* 答：卫星数据，指的是索引元素所指向的数据记录，比如数据库中的某一行。在B-树中，无论中间节点还是叶子节点，都带有卫星数据。
      而在B+树中，只有叶子节点带有卫星数据，其余中间节点仅仅是索引，没有任何数据关联。在数据库的聚集索引(Clustered Index)中，
      叶子节点直接包含卫星数据。在非聚集索引（NonClustered Index）中，叶子节点带有指向卫星数据的指针。

* 问：B+树的查询流程与B-树的差异。
* 答：1. B+树中间节点没有卫星数据，所以同样大小的磁盘页可以容纳更多的节点元素。数据量相同的情况下，B+树更加矮胖，因此IO此处更少。
      2. B+树的查询必须查询到叶子节点，而B-树只要找到匹配元素即可，无论匹配元素处于中间节点还是叶子节点。因此B-树查找性能不稳定。
      B+树的每一次查找都是稳定的。

* 问：综合比较B+树和B-树。
* 答：B+树比B-树的优势有三个：
      1.单一节点存储更多的元素，使得查询的IO次数更少。
      2.所有查询都要查找到叶子节点，查询性能稳定。
      3.所有叶子节点形成有序链表，便于范围查询。




